function BackgroundObject(t,e){this.entity=t,this.effects=e,this.globalScale=1,this.globalXRef=1,this.globalYRef=1}var RGBBackgroundVertextShaderSrc="attribute vec3 aVertexPosition; attribute vec2 aTextureCoord; uniform mat4 uMVMatrix; uniform mat4 uPMatrix; varying float xx, yy; void main(void) { 	vec2 coord = aTextureCoord; 	gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 2.0); 	xx = clamp(aVertexPosition.x,0.0,1.0); 	yy = clamp(aVertexPosition.y,0.0,1.0); }",RGBBackgroundFragmentShaderSrc="precision mediump float; uniform float time; uniform float faderValue; varying float xx; varying float yy; uniform float va; uniform float vb; uniform float vc; uniform float vd; vec3 veccos(in vec3 a) { return vec3(cos(a.x), cos(a.y), cos(a.z)); } vec3 vecsin(in vec3 a) { return vec3(sin(a.x), sin(a.y), sin(a.z)); } vec3 vectan(in vec3 a) { return vec3(tan(a.x), tan(a.y), tan(a.z)); } vec3 vecabs(in vec3 a) { return vec3(abs(a.x), abs(a.y), abs(a.z)); } vec3 vecsqr(in vec3 a) { return vec3(a.x * a.x, a.y * a.y, a.z * a.z); } vec3 vecadd(in vec3 a, in vec3 b) { return vec3(a.x + b.x, a.y + b.y, a.z + b.z); } vec3 vecsubstract(in vec3 a, in vec3 b) { return vec3(a.x - b.x, a.y - b.y, a.z - b.z); } vec3 vecmultiply(in vec3 a, in vec3 b) { return vec3(a.x * b.x, a.y * b.y, a.z * b.z); } vec3 vecdiv(in vec3 a, in vec3 b) { return vec3(a.x / b.x, a.y / b.y, a.z / b.z); } vec3 createvector(in float a, in float b, in float c) { return vec3(a, b, c); } vec3 veccolormap(in vec3 a, in vec3 b, in vec3 c) { return createvector(a.x / 10.0, b.x / 10.0, c.x / 10.0); } void main(void) { 	float ra = va, rb = vb, rc = vc, rd = vd; 	float x = xx * 10.0, y = yy * 10.0; 	vec3 v = VALUE; 	gl_FragColor = vec4(v.x * faderValue, v.y * faderValue, v.z * faderValue, 1.0); }";BackgroundObject.prototype.initialize=function(t){this.mvMatrix=mat4.create(),this.pMatrix=mat4.create(),this.initBuffersRGB(t),this.initShadersRGBAnimate(t)},BackgroundObject.prototype.render=function(t){var e=timerValue();t.useProgram(this.shaderProgram);for(var r in this.effects)this.effects[r].apply(this);var a=t.getUniformLocation(this.shaderProgram,"va");t.uniform1f(a,e),a=t.getUniformLocation(this.shaderProgram,"vb"),t.uniform1f(a,globalVb),a=t.getUniformLocation(this.shaderProgram,"vc"),t.uniform1f(a,globalVc),a=t.getUniformLocation(this.shaderProgram,"vd"),t.uniform1f(a,globalVd),a=t.getUniformLocation(this.shaderProgram,"time"),t.uniform1f(a,timerValue()),a=t.getUniformLocation(this.shaderProgram,"faderValue"),t.uniform1f(a,this.transparencyValue),t.disable(t.DEPTH_TEST),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),mat4.identity(this.pMatrix),mat4.ortho(0,1,0,1,.1,100,this.pMatrix),mat4.identity(this.mvMatrix),mat4.translate(this.mvMatrix,[0,0,-.2]),t.bindBuffer(t.ARRAY_BUFFER,this.squareVertexPositionBuffer),t.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute,this.itemSize,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this.squareVertexPositionBuffer),t.vertexAttribPointer(this.shaderProgram.textureCoordAttribute,this.itemSize,t.FLOAT,!1,0,0),this.setMatrixUniforms(t),t.drawArrays(t.TRIANGLE_STRIP,0,this.numItems)},BackgroundObject.prototype.initBuffersRGB=function(t){this.squareVertexPositionBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.squareVertexPositionBuffer);var e=[2,2,0,0,2,0,2,0,0,0,0,0];t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),this.itemSize=3,this.numItems=4},BackgroundObject.prototype.initShadersRGBAnimate=function(t){var e=t.createShader(t.VERTEX_SHADER);t.shaderSource(e,RGBBackgroundVertextShaderSrc),t.compileShader(e);var r=t.createShader(t.FRAGMENT_SHADER),a=RGBBackgroundFragmentShaderSrc;a=a.replace("VALUESCALE",this.globalScale.toFixed(2).toString()),a=a.replace("VALUEXREF",this.globalXRef.toFixed(2).toString()),a=a.replace("VALUEYREF",this.globalYRef.toFixed(2).toString()),a=a.replace("VALUE",this.entity.toLowerCase()),t.shaderSource(r,a),t.compileShader(r),this.shaderProgram=t.createProgram();var i=this.shaderProgram;t.attachShader(i,e),t.attachShader(i,r),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||console.log("Could not initialise shaders for "+this.entity),t.useProgram(i),i.vertexPositionAttribute=t.getAttribLocation(i,"aVertexPosition"),t.enableVertexAttribArray(i.vertexPositionAttribute),i.textureCoordAttribute=t.getAttribLocation(i,"aTextureCoord"),t.enableVertexAttribArray(i.textureCoordAttribute),i.pMatrixUniform=t.getUniformLocation(i,"uPMatrix"),i.mvMatrixUniform=t.getUniformLocation(i,"uMVMatrix")},BackgroundObject.prototype.setMatrixUniforms=function(t){t.uniformMatrix4fv(this.shaderProgram.pMatrixUniform,!1,this.pMatrix),t.uniformMatrix4fv(this.shaderProgram.mvMatrixUniform,!1,this.mvMatrix)};